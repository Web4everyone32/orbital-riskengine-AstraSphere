<!DOCTYPE html>
<html>
<head>
  <title>AstraSphere ‚Äì Orbital Intelligence</title>

  <script src="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Cesium.js"></script>
  <link href="https://cesium.com/downloads/cesiumjs/releases/1.114/Build/Cesium/Widgets/widgets.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/astra.css">
</head>

<body>

<div id="cesiumContainer"></div>

<div id="panel">
  <h2>AstraSphere</h2>
  <p class="subtitle">Orbital & Earth Intelligence Platform</p>

  <div id="details">
    Multi-layer orbital context using representative satellite samples
  </div>

  <div class="legend">
    <span style="color:#ff9f1c">‚óè Orbital Congestion</span>
    <span style="color:#2ecc71">‚óè Earth Data Reliability</span>
    <span style="color:#ff3b30">‚óè Risk Intelligence</span>
    <span style="color:#3498db">‚óè Reference / Coordination</span>
  </div>
</div>

<script>
/* =====================================================
   BASE VIEWER (NASA-LIKE)
   ===================================================== */

const viewer = new Cesium.Viewer("cesiumContainer", {
  animation: true,
  timeline: true,
  baseLayerPicker: false,
  geocoder: false,
  homeButton: false,
  sceneModePicker: false,
  infoBox: false,
  selectionIndicator: true,
  imageryProvider: new Cesium.IonImageryProvider({ assetId: 2 })
});

viewer.scene.skyBox.show = false;
viewer.scene.sun.show = false;
viewer.scene.moon.show = false;
viewer.scene.backgroundColor = Cesium.Color.BLACK;

viewer.scene.globe.enableLighting = true;
viewer.scene.skyAtmosphere.show = true;
viewer.scene.globe.showGroundAtmosphere = true;

viewer.clock.multiplier = 120;
viewer.clock.shouldAnimate = true;

viewer.camera.setView({
  destination: Cesium.Cartesian3.fromDegrees(0, 15, 14_500_000)
});

viewer.scene.screenSpaceCameraController.enableTilt = false;

/* =====================================================
   COLOR DEFINITIONS (MATCH YOUR LEGEND)
   ===================================================== */

const COLORS = {
  CONGESTION: Cesium.Color.ORANGE,
  RELIABILITY: Cesium.Color.LIME,
  RISK: Cesium.Color.RED,
  REFERENCE: Cesium.Color.CYAN
};

/* =====================================================
   SAMPLE SATELLITE DATA (NASA-LIKE)
   ===================================================== */

const sampleSatellites = [
  { name: "Landsat 8", lat: 10, lon: -60, alt: 705, color: COLORS.RELIABILITY },
  { name: "Sentinel-6", lat: -20, lon: 30, alt: 1336, color: COLORS.RELIABILITY },
  { name: "NOAA 21", lat: 45, lon: 80, alt: 824, color: COLORS.REFERENCE },
  { name: "CYGNSS-4", lat: -10, lon: -100, alt: 520, color: COLORS.CONGESTION },
  { name: "CYGNSS-8", lat: 30, lon: 140, alt: 520, color: COLORS.CONGESTION },
  { name: "SWOT", lat: -35, lon: -10, alt: 890, color: COLORS.RELIABILITY },
  { name: "PACE", lat: 5, lon: 60, alt: 676, color: COLORS.RELIABILITY },
  { name: "ISS", lat: 0, lon: 0, alt: 420, color: COLORS.REFERENCE }
];

/* =====================================================
   ORBIT DRAWING FUNCTION
   ===================================================== */

function drawOrbit(altitudeKm, inclinationDeg, color, opacity) {
  const positions = [];
  const radius = 6378137 + altitudeKm * 1000;

  for (let i = 0; i <= 360; i += 3) {
    positions.push(
      Cesium.Cartesian3.fromRadians(
        Cesium.Math.toRadians(i),
        Cesium.Math.toRadians(inclinationDeg),
        radius
      )
    );
  }

  viewer.entities.add({
    polyline: {
      positions,
      width: 1,
      material: color.withAlpha(opacity)
    }
  });
}

/* =====================================================
   LAYERS (MATCHING YOUR IMAGE)
   ===================================================== */

// üü† Orbital congestion shells
drawOrbit(500, 35, COLORS.CONGESTION, 0.4);
drawOrbit(520, 35, COLORS.CONGESTION, 0.6);
drawOrbit(550, 35, COLORS.CONGESTION, 0.8);

// üü¢ Earth data reliability orbits
drawOrbit(705, 98, COLORS.RELIABILITY, 0.6);
drawOrbit(890, 77, COLORS.RELIABILITY, 0.5);

// üî¥ Risk intelligence arc (alert zone)
drawOrbit(550, 15, COLORS.RISK, 0.9);

// üîµ Reference orbit
drawOrbit(420, 51.6, COLORS.REFERENCE, 0.7);

/* =====================================================
   SATELLITE POINTS + LABELS (NASA STYLE)
   ===================================================== */

for (const sat of sampleSatellites) {
  viewer.entities.add({
    name: sat.name,
    position: Cesium.Cartesian3.fromDegrees(
      sat.lon,
      sat.lat,
      sat.alt * 1000
    ),
    point: {
      pixelSize: 9,
      color: sat.color,
      outlineColor: Cesium.Color.WHITE,
      outlineWidth: 1
    },
    label: {
      text: sat.name,
      font: "12px sans-serif",
      fillColor: Cesium.Color.WHITE,
      pixelOffset: new Cesium.Cartesian2(0, -14),
      showBackground: true,
      backgroundColor: Cesium.Color.BLACK.withAlpha(0.6),
      distanceDisplayCondition:
        new Cesium.DistanceDisplayCondition(0, 18_000_000)
    }
  });
}

/* =====================================================
   INTERACTION EXPLAINER
   ===================================================== */

viewer.selectedEntityChanged.addEventListener(entity => {
  if (!entity) return;

  document.getElementById("details").innerHTML = `
    <b>${entity.name}</b><br/><br/>
    This satellite operates within layered orbital contexts where
    congestion, risk intelligence, and Earth-data reliability interact.
  `;
});
</script>

</body>
</html>
